<launch>
  <!-- ============================================================= -->
  <!-- ðŸ”§ PARÃ‚METROS DE CONFIGURAÃ‡ÃƒO -->
  <!-- ============================================================= -->
  <arg name="nvants" default="3"/>
  <arg name="sep_px" default="5"/>
  <arg name="max_wh" default="200"/>

  <arg name="graph_path" default="$(find airspace_control)/graph/sistema_logistico/grafo.txt"/>
  <arg name="start_node" default="VERTIPORT_0"/>

  <!-- ============================================================= -->
  <!-- ðŸ—ºï¸ 1. GeraÃ§Ã£o do mapa e mundo Stage -->
  <!-- ============================================================= -->
  <node name="map_and_stage"
        pkg="airspace_control"
        type="create_map_and_launch_stage.sh"
        args="$(arg nvants) $(arg sep_px) $(arg max_wh)"
        output="screen"
        required="true"/>

  <!-- ============================================================= -->
  <!-- ðŸš 2. InicializaÃ§Ã£o dos VANTs fÃ­sicos (uav_agent.py) -->
  <!-- ============================================================= -->
  <group ns="vant_0">
    <node name="uav_agent"
          pkg="airspace_control"
          type="uav_agent.py"
          output="screen"
          args=""
          required="true">
      <param name="robot_name" value="vant_0"/>
    </node>
  </group>

  <group ns="vant_1">
    <node name="uav_agent"
          pkg="airspace_control"
          type="uav_agent.py"
          output="screen"
          args=""
          required="true">
      <param name="robot_name" value="vant_1"/>
    </node>
  </group>

  <group ns="vant_2">
    <node name="uav_agent"
          pkg="airspace_control"
          type="uav_agent.py"
          output="screen"
          args=""
          required="true">
      <param name="robot_name" value="vant_2"/>
    </node>
  </group>

  <!-- ============================================================= -->
  <!-- ðŸ§  3. Controladores (AutomatonNode / ControladorVANT) -->
  <!-- ============================================================= -->
  <node name="controller_vant_0"
        pkg="airspace_control"
        type="main.py"
        output="screen">
    <param name="graph_path" value="$(arg graph_path)"/>
    <param name="start_node" value="$(arg start_node)"/>
    <param name="robot_name" value="vant_0"/>
  </node>

  <node name="controller_vant_1"
        pkg="airspace_control"
        type="main.py"
        output="screen">
    <param name="graph_path" value="$(arg graph_path)"/>
    <param name="start_node" value="$(arg start_node)"/>
    <param name="robot_name" value="vant_1"/>
  </node>

  <node name="controller_vant_2"
        pkg="airspace_control"
        type="main.py"
        output="screen">
    <param name="graph_path" value="$(arg graph_path)"/>
    <param name="start_node" value="$(arg start_node)"/>
    <param name="robot_name" value="vant_2"/>
  </node>

</launch>
